{
  "author": {
    "name": "Feugy"
  },
  "name": "swagger-jack",
  "description": "Express compliant tooling to generate swagger Json API and validate Web-layer input/output. Based on json-gate",
  "contributors": [
    {
      "name": "Filirom1",
      "email": "filirom1@gmail.com"
    },
    {
      "name": "Simon Lopez",
      "email": "simon.lopez@slopez.org"
    }
  ],
  "keywords": [
    "swagger",
    "express",
    "validation",
    "api",
    "descriptor"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/feugy/swagger-jack"
  },
  "license": "MIT",
  "version": "1.6.2",
  "main": "lib/index.js",
  "engines": {
    "node": "+0.8.0"
  },
  "scripts": {
    "test": "cake test",
    "prepublish": "cake build"
  },
  "dependencies": {
    "async": "0.2.6",
    "coffee-script": "1.6.2",
    "express": "3.1.0",
    "json-gate": "0.8.21",
    "underscore": "1.4.4",
    "request": "2.16.6",
    "rimraf": "2.1.4"
  },
  "devDependencies": {
    "chai": "1.5.0",
    "js-yaml": "2.0.3",
    "mocha": "1.8.2"
  },
  "readme": "# Swagger for Express\r\n[![Build Status](https://travis-ci.org/feugy/swagger-jack.png)](https://travis-ci.org/feugy/swagger-jack)\r\n\r\n\r\n[Swagger](http://developers.helloreverb.com/swagger/) is a specification and complete framework implementation for describing, producing, consuming, and visualizing RESTful web services.\r\n\r\nIt provides:\r\n\r\n* _specification_: to write descriptors of your API\r\n* _tools_: based on this descriptors: friendly GUI for documentation, client libraries...\r\n\r\n**Swagger-Jack** is a nodeJS modules that implements the swagger specification and offers you three middlewares to:\r\n\r\n1. _generate_ your routes from a swagger descriptor, binding them to your own controller functions\r\n2. _validate_ all the API inputs (query parameter, headers, bodies...)\r\n3. report _errors_ in a consistent way\r\n\r\n\r\n## How can I use it ?\r\n\r\nFirst, get the module, by referencing it inside your package.json:\r\n\r\n```js\r\n  \"dependencies\": {\r\n    \"express\": \"3.1.0\",\r\n    \"swagger-jack\": \"1.0.0\"\r\n  }\r\n```\r\n\r\nThen, when creating your Express application, import and configure the two middlewares:\r\n\r\n```js\r\n  var express = require('express'),\r\n      swagger = require('swagger-jack');\r\n\r\n  var app = express();\r\n  \r\n  app.use(express.bodyParser())\r\n    .use(express.methodOverride())\r\n    .use(swagger.generator(app, {\r\n      // general descriptor part\r\n      apiVersion: '2.0',\r\n      basePath: 'http://my-hostname.com/api'\r\n    }, [{\r\n      // descriptor of a given resource\r\n      api: {\r\n        resourcePath: '/user'\r\n        apis: [{\r\n          path: '/user/'\r\n          operations: [{\r\n            httpMethod: 'POST',\r\n            nickname: 'create'\r\n          }, {\r\n            httpMethod: 'GET',\r\n            nickname: 'list'\r\n\r\n          }]\r\n        }]\r\n      },\r\n      // controller for this resource\r\n      controller:\r\n        create: function(req, res, next) {\r\n          // create a new user...\r\n        },\r\n        list: function(req, res, next) {\r\n          // list existing users...\r\n        }\r\n    }])\r\n    .use(swagger.validator(app))\r\n    .use(swagger.errorHandler())\r\n  \r\n  app.get \"/api/unvalidated\", function(req, res, next) {\r\n    // not documented not validated\r\n  }\r\n  app.listen(8080);\r\n```\r\n\r\n\r\n### Generator middleware\r\n\r\nGenerator takes the following parameters:\r\n\r\n1. your express application,\r\n1. a general descriptor object (which is totally not constraint: put whatever you need in it), \r\n1. an array of \"resources\",\r\n1. optionnal `options` (see below)\r\n\r\nA \"resource\" is composed by a *resource* descriptor, and the corresponding code (what we called *controller*).\r\n\r\nThe middleware will automatically add to your express application the routes found inside the *resource* descriptor, and bound them to the provided *controller* (it uses the `nickname` attribute from the descriptor to bound the right controller's method).\r\n\r\nIn the previous example, two routes are created:\r\n\r\n1. `POST /api/user/` to create a user (controller method `create()`)\r\n1. `GET /api/user/` to list existing users (controller method `list()`)\r\n\r\nAs explained in the swagger specification, the descriptor `basePath` attribute is used as url prefix for every resources and their operations. \r\nYou should not repeat it in resources paths and apis path.\r\n\r\nThe `resourcePath` in resource object is intended to be repeated in every api path.\r\n\r\nIf you just want to document some existing routes, just provide a resource descriptor, and no associated controller. \r\nOf course, no validation will be provided.\r\n\r\nYou can still register routes and middleware within your application, like you've used to. \r\nBut they will not be documented nor validated.\r\n\r\nThe following options are available:\r\n\r\n- descPath `String`: path of generated swagger descriptor. Must contain leading slash. Default to `/api-docs.json`, with `basePath` used as prefix.\r\n\r\n\r\n### Validator middleware\r\n\r\nValidator will analyze the declared parameters of your descriptor, and validate the input.\r\nIt will handle parameter casting, range validation and declared model compliance (thank to the excellent [json-gate](https://github.com/oferei/json-gate)).\r\n\r\nAll casted values (except body parameters) are available inside the controller methods with the `req.input` associative array.\r\nNo matter if parameter is from path, query or header: it will be present inside `req.input`.\r\n\r\nYou can still use the Express original function (`req.params`, `req.param()`, `req.headers`...), but beware: values are just strings.\r\n\r\n\r\nBodies are also validated, but parsing is done by express's bodyParser middleware: it takes in account json and multipart bodies. For other bodies kind, validator will read itself the body, and perfoms casting.\r\n\r\n**Caution** You *must* use `express.bodyParser()` *before* `swagger.validator`. \r\n\r\n**Caution** You *can't* read the body by yourself (with *data*/*end* request events) for routes declared with `swagger.validator`. \r\n\r\nIf you do not need validation, no problem: just remove the validator middleware.\r\n\r\n\r\n### Error middleware\r\n\r\nValidation errors (and your custom business errors) are handled by the error middleware.\r\nIt uses the express's error mecanism: invoke the next() method with an argument.\r\n\r\nWeither it's a string or an object, it will be serialized into a json response with an http status (500 by default).\r\n\r\nFor example:\r\n\r\n```js\r\n  use(swagger.generator(app, { \r\n    // general descriptor ... \r\n  }, [{\r\n    api: // resource descriptor...\r\n    controller: {\r\n      create: function(req, res, next) {\r\n        if (// error check...) {\r\n          var err = new Error('forbidden !');\r\n          err.status = 403;\r\n          return next(err);\r\n        }\r\n        // process ...\r\n      }\r\n    }\r\n  }]))\r\n```\r\n\r\nInput validation errors are reported the same way.\r\n\r\nYou may not use the error middleware and provide your own.\r\n\r\n\r\n### Power-tip !\r\n\r\nUse js-yaml to store your descriptor in a separate file, and split your code into other controller modules:\r\n\r\n```js\r\n  var express = require('express'),\r\n      swagger = require('swagger-jack'),\r\n      yaml = require('js-yaml');\r\n  \r\n  var app = express();\r\n  \r\n  app.use(express.bodyParser())\r\n    .use(express.methodOverride())\r\n    .use(swagger.generator(app, \r\n      require('/api/general.yml'), \r\n      [{\r\n        api: require('/api/users.yml'),\r\n        controller: require('/controller/users')\r\n      },{\r\n        api: require('/api/commands.yml'),\r\n        controller: require('/controller/commands')\r\n      }])\r\n    .use(swagger.validator(app))\r\n    .use(swagger.errorHandler())\r\n  \r\n  app.listen(8080);\r\n```\r\n\r\n\r\n### Really hacky power-tip\r\n\r\nFor very specific cases, it's possible to use the validation function without request.\r\n\r\nFor example:\r\n\r\n```js\r\n  // init your application as usual\r\n  var app = express();\r\n  var validator; // don't init yet ! the generator was not invoked\r\n  app.use(express.bodyParser())\r\n    .use(express.methodOverride())\r\n    .use(swagger.generator(app,\r\n      ...\r\n    , [{\r\n      api: require('./fixtures/validatedApi.yml'),\r\n      controller: require('./controller')\r\n    ])\r\n    // keep the validator middleware.\r\n    .use(validator = swagger.validator(app))\r\n    .use(swagger.errorHandler())\r\n\r\n  ...\r\n\r\n  // manually validate a \"fake\" url\r\n  var casted = {};\r\n  var url = '/api/queryparams';\r\n  // method, Express path, url, query, headers, body, casted, callback\r\n  validator.validate('GET', url, url, {param1:\"-2\", param2:\"5.5\"}, {}, {}, casted, function(err) {\r\n    if (err) {\r\n      // handle validation errors\r\n    } else {\r\n      // you can use casted values safely.\r\n    }\r\n  });\r\n```\r\n\r\nYou still need to use an Express application and to declare generator and validator middlewares.\r\n\r\nDocumentation for the `validate()` function can be found [in the source code](https://github.com/feugy/swagger-jack/blob/master/src/validator.coffee#L216)\r\n\r\n\r\n## TODO How does it works ?\r\n\r\nTo be Done\r\n\r\n\r\n## What about [swagger-node-express](https://github.com/wordnik/swagger-node-express) ?\r\n\r\nReverb folks (the ones who made Swagger) provide an express module to enhance your Express application by returning the swagger descriptor.\r\n\r\nIt provides a quick way to describe your code in Json and register your express routes.\r\nTo me it's very handy for a start, but has three problems:\r\n\r\n1. your descriptor is inside your code, and splitted into parts, which makes it not easy to read\r\n2. you do not use any more the marvellous express functions, but the one provided by swagger-node-epxress\r\n3. it does not use the descriptor to automatize input validation, and you still have to cast and check your parameters\r\n\r\n\r\n## Changelog\r\n\r\n### 1.6.2\r\n\r\n- fix mising leading / on generated descriptor, when using non empty basePath  ([details](https://github.com/feugy/swagger-jack/issues/19))\r\n\r\n### 1.6.1\r\n\r\n- do not prepend basePath to api's path with swagger root descriptor ([details](https://github.com/feugy/swagger-jack/issues/19))\r\n- enforce validator on api declared with basePath\r\n\r\n### 1.6.0\r\n\r\n- fix basePath handling, be more strict on operation path validation ([details](https://github.com/feugy/swagger-jack/issues/10))\r\n- allow validation utilities to be used without Express's request object ([details](https://github.com/feugy/swagger-jack/issues/11))\r\n\r\n### 1.5.0\r\n\r\n- more strict check for mandatory data inside descriptors\r\n- test missing models that are referenced in apis\r\n\r\n### 1.4.2\r\n\r\n- only expose relevant models inside the swagger descriptor for a given resource ([details](https://github.com/feugy/swagger-jack/pull/9))\r\n- be less restrictive on model content ([details](https://github.com/feugy/swagger-jack/pull/8))\r\n\r\n### 1.4.1\r\n\r\n- check model id unicity to avoid erasure\r\n- allow apis to contain unwired resources. Allow to document handy-managed routes\r\n\r\n### 1.4.0\r\n\r\n- use CakeFile for better build/test portability\r\n- enhance documentation\r\n- allow swagger descriptor path customization ([details](https://github.com/feugy/swagger-jack/issues/6))\r\n\r\n### 1.3.1\r\n\r\n- fix when req.body is undefined ([details](https://github.com/feugy/swagger-jack/pull/4))\r\n\r\n### 1.3.0\r\n\r\n- allow anonymous complex bodies to have multiple occurences \r\n\r\n### 1.2.0\r\n\r\n- allow body parameter to be facultative\r\n- fix packaging issues with coffee. Only contributors need to install it globally (as well as mocha)\r\n\r\n### 1.1.0\r\n\r\n- be more strict regarding multipart management \r\n\r\n### 1.0.1\r\n\r\n- add some test on multipart/related body parsing \r\n- enhance documentation\r\n- use [Travis CI](https://travis-ci.org/feugy/swagger-jack)\r\n\r\n\r\n## License (MIT)\r\n\r\nSwagger is shipped with an MIT Licence. \r\n\r\nCopyright (c) 2013 Atos Worldline\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n\r\n--------\r\n### Addendum: what's with that name ?\r\n\r\nWe looked for a fun and yet eloquent name. But swagger.js was already used.\r\n[Jack Swagger](http://www.wwe.com/superstars/jackswagger) is an american catch superstar, and we never heard about him before, but it perfectly fits your naming goals :)\r\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/feugy/swagger-jack/issues"
  },
  "homepage": "https://github.com/feugy/swagger-jack",
  "_id": "swagger-jack@1.6.2",
  "_from": "swagger-jack@~1.6.2"
}
